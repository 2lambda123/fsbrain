---
title: "fsbrain advanced visualization examples"
author: "Tim Sch√§fer"
date: "June 24, 2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rgl::setupKnitr()
```


## Example data

First we specify a subjects dir and the subject we want to use. Feel free to replace this with your data.

```{r}
library('fsbrain')
sjd = '~/data/subject1_only'
sj = 'subject1'
```

Now increase the figure size.

```{r}
library('rgl');
r3dDefaults$windowRect=c(20, 20, 900, 900);
```


## Eporting (almost) publication-ready plots

The `vis.export.*` functions provide a high-level interface to export plots. They require the `magick` package.

```{r rgl=TRUE, fig.show = 'hide'}
cm = vis.subject.morph.standard(sjd, sj, 'sulc', rglactions=list('no_vis'=T));
img = vis.export.from.coloredmeshes(cm, colorbar_legend='Sulcal depth [mm]');
```

The image gets exported as a PNG file into the current working directory. One can also show it directly:

```{r}
img;
```


## Group visualization

You can use fsbrain to plot data for many subjects at once. First we define a subjects list, these are the subjects in our FreeSurfer subjects directory that we want to plot:

```{r}
sjd = "~/data/study1";                           # set SUBJECTS_DIR
sjl = c('subject1', 'subject2', 'subject3');     # specify manually
sjl2 = read.md.subjects("~/data/study1/subjects.txt", header = FALSE);  # read from ASCII subjects file (one per line)
```


## Learning more

To learn more, read the vignettes:

```{r, eval = FALSE}
browseVignettes('fsbrain');
```

In general, the vignettes are a great way to get started with *fsbrain*. You can also read them online at CRAN, they are linked on the [fsbrain page on GitHub](https://github.com/dfsp-spirit/fsbrain).

